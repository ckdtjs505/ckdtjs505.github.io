---
title: '[Js] 프로토타입'
last_modified_at: 2020-06-021
share: true
related: false
tags:
  - javascript
  - callback
---

프로토타입!? 많이 생소한 단어다. 자바스크립트는 프로토타입 기반 언어라고들 하지만, 프로토 타입이 도대체 먼자 감을 잡기가 쉽지가 않다.
대부분의 언어는 클래스 기반의 언어로 배웠고, '상속'이라는 개념이 있어 비슷한 클래스를 쉽게 만들 수 있었다. 
그래서 많이들 자바스크립트가 어렵다고 느끼는 이유 중 하나가 생소한 개념인 프로토 타입 기반의 언어라 그렇다. 

솔직하게 자바스크립트에서 프로토 타입의 개념의 필요성을 느끼지 못하고 있다.
개념적으로는 중요하지만, 실무에서 프로토 타입을 과연 몇번이나 쓰게 될까? 
최근 자바스크립트에서는 클래스 기능을 지원하고 있어, 프로토타입의 개념을 모른다고 큰 문제가 되거나 할 일이 없다.

비록 프로토타입이라는 개념이 어렵고 크게 필요성을 느끼고 있지는 못하지만, 
어떤 역할을 맞고 있고, 어떠한 특성이 있는지 정도는 알고 넘어가자 ㅎㅎ 

### 프로토타입 개념

```js
let Person = function (name, age){
    this.locale = "ko";
    this.name = name;
    this.age = age;
}

Person.prototype.getLocale = function(){
    return this.locale;
}

let man = new Person("changSun", 27);
console.log(man.getLocale, man.__proto__.getLocale, Person.prototype.getLocale);
console.log(man.getLocale(), man.__proto__.getLocale(), Person.prototype.getLocale());
```

결과값을 살펴보자.
첫번째 콘솔의 결과값은 
```js
ƒ (){
    return this.locale;
} ƒ (){
    return this.locale;
} ƒ (){
    return this.locale;
}
```
같은 값이 할당된것을 알 수 있다. 
생성자함수가 어떻게 새로운 변수에 값이 할당되는지 순서로 알아보자

1. `Person 생성자` 함수를 호출 
2. `Person 생성자` 함수에 정의된 내용으로 새로운 `man 인스턴스` 을 생성
3. `man 인스턴스` 에 `__proto__ 프로퍼티` 자동 부여.
4.  `__proto__ 프로퍼티`는 `Person 생성자`의 `prototype 프로퍼티`를 참조한다.

이렇게 인스턴스에는 `__proto__`, 생성자에 `prototype`는 서로 같은 함수(메서드)를 공유하게 된다. 
`prototype`은 객체 내부에서 인스턴스가 사용할 메서드를 저장한다. 

두번째 콘솔의 결과값은 
```js
ko undefined undefined
```
`man` , `man.__proto__`, `prototype` 은 모드 같은 함수를 할당하고 있는 것을 첫번째 콘솔에서 알아보았다.
그러나 놀랍게도 `man`객체만 정확한 결과값을 출력했다. 왜그럴까? 바로 this의 동작 원리 때문인데.
`man.__proto__`에서의 this는 다른 값을 바라보고 있기 때문이다. 여기서 헷갈리는 부분은 
`man` 에는 함수가 선언되어 있지 않음에도 오히려 올바른 값을 반환하고 있기 때문이다.
가능하게 된 이유는 별겨아닌 `__proto__` 프로퍼티가 생략 가능하도록 정의 되어 있기 때문이다. 
물론 생략 가능한 프로퍼티에 대해 거부감을 느낄 수 있겠지만, 만든분이 그렇게 만들었다

결론적으로 new 연산자로 생성된 인스턴스는 `__proto__`라는 생략가능한 프로퍼티를 생성자의 `prototype`을 참조한다.

